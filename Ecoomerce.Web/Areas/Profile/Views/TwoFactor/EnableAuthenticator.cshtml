@model Ecommerce.Application.ViewModels.User___Account.EnableTwoFactorViewModel
@{
    ViewData["Title"] = "Enable Authenticator";
}

<div class="container py-4">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="mb-4">
                <h2 class="mb-1 fw-bold">Enable Authenticator App</h2>
                <p class="text-muted mb-0">Secure your account with an authenticator app</p>
            </div>

            <div class="card mb-4">
                <div class="card-body">
                    <h6 class="fw-bold mb-3">Step 1: Download an Authenticator App</h6>
                    <p class="text-muted">
                        Download an authenticator app on your mobile device:
                    </p>
                    <div class="d-flex gap-3 mb-3">
                        <a href="https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2" 
                           target="_blank" class="btn btn-outline-secondary btn-sm">
                            <i class="bi bi-google-play me-1"></i>Google Authenticator
                        </a>
                        <a href="https://apps.apple.com/app/google-authenticator/id388497605" 
                           target="_blank" class="btn btn-outline-secondary btn-sm">
                            <i class="bi bi-apple me-1"></i>App Store
                        </a>
                        <a href="https://authy.com/download/" target="_blank" class="btn btn-outline-secondary btn-sm">
                            <i class="bi bi-shield-check me-1"></i>Authy
                        </a>
                    </div>
                </div>
            </div>

            <div class="card mb-4">
                <div class="card-body">
                    <h6 class="fw-bold mb-3">Step 2: Scan QR Code or Enter Key</h6>
                    <p class="text-muted">
                        Open your authenticator app and scan this QR code or enter the key manually.
                    </p>
                    
                    <div class="row">
                        <div class="col-md-6 text-center mb-4 mb-md-0">
                            <div class="bg-white p-4 rounded border d-inline-block">
                                <!-- QR Code placeholder - use a QR code library in production -->
                                <div class="bg-light p-5 rounded">
                                    <i class="bi bi-qr-code" style="font-size: 6rem;"></i>
                                    <p class="small text-muted mt-2 mb-0">QR Code</p>
                                </div>
                                <p class="small text-muted mt-2 mb-0">
                                    Scan with your authenticator app
                                </p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="bg-light p-3 rounded">
                                <p class="small text-muted mb-2">Can't scan? Enter this key manually:</p>
                                <code class="d-block p-2 bg-white rounded text-center" style="word-break: break-all;">
                                    @Model.SharedKey
                                </code>
                            </div>
                            <div class="mt-3">
                                <p class="small text-muted">
                                    <strong>Issuer:</strong> ShopSmart<br />
                                    <strong>Account:</strong> Your email
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-body">
                    <h6 class="fw-bold mb-3">Step 3: Verify Code</h6>
                    <p class="text-muted">
                        Enter the 6-digit code from your authenticator app to complete setup.
                    </p>

                    <form asp-action="EnableAuthenticator" method="post">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="Code" class="form-label">Verification Code</label>
                                    <input type="text" class="form-control form-control-lg text-center" 
                                           name="Code" id="Code" maxlength="6" placeholder="000000"
                                           autocomplete="off" inputmode="numeric" pattern="[0-9]*" required />
                                    <div class="invalid-feedback">Please enter a valid 6-digit code</div>
                                </div>
                            </div>
                        </div>

                        <div class="d-flex gap-2">
                            <button type="submit" class="btn btn-primary">
                                <i class="bi bi-shield-check me-2"></i>Verify & Enable
                            </button>
                            <a asp-action="Index" class="btn btn-outline-secondary">Cancel</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
